<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Arweave Content Loader</title>
</head>
<body>
  <div id="content">
    <p>Loading content...</p>
  </div>

  <script>
    // 获取URL hash
    function getHashFromURL() {
      const path = window.location.pathname;
      return path.split("/")[1];
    }

    // 通过Arweave网关获取内容
    async function loadArweaveContent(hash) {
      try {
        const response = await fetch(`https://arweave.4everland.xyz/${hash}`, {
          method: "GET",
          headers: {
            "Accept": "text/html", // 设置为接收HTML内容
          },
          mode: "cors" // 使用CORS模式
        });

        // 检查响应状态
        if (!response.ok) {
          throw new Error(`Content not found: ${response.statusText}`);
        }

        const contentType = response.headers.get("Content-Type");

        // 根据内容类型决定如何显示内容
        if (contentType && contentType.includes("text/html")) {
          const htmlContent = await response.text();
          document.getElementById("content").innerHTML = htmlContent;
        } else {
          document.getElementById("content").textContent = "Unsupported content type.";
        }
      } catch (error) {
        document.getElementById("content").textContent = `Error loading content: ${error.message}`;
      }
    }

    // 执行加载过程
    const arHash = getHashFromURL();
    if (arHash) {
      loadArweaveContent(arHash);
    } else {
      document.getElementById("content").textContent = "No content hash provided in URL.";
    }
  </script>
</body>
</html>
